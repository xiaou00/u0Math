#范畴论 
$$\renewcommand{\ob}[1]{\operatorname{ob}{\mathfrak{#1}}}
\renewcommand{\mor}[1]{\operatorname{Mor}{\mathfrak{#1}}}
\renewcommand{\dom}[1]{\operatorname{dom}{#1}}
\renewcommand{\cod}[1]{\operatorname{cod}{#1}}$$
>[!definition] 自然变换
>设$\frak C$和$\frak D$是[[范畴]], $F:\frak C\to D$和$G:\frak C\to D$是两个[[函子]], 一个**自然变换**(natural transformation)$\eta:F\Rightarrow G$是一个映射$\ob{C}\to\mor{D}$:
>$$A\mapsto(\eta_A:F(A)\to G(A)),\quad A\in\ob{C}$$
>使得对$\frak C$的任意态射$f:A\to B$, $G(f)\eta_A=\eta_BF(f)$成立, 即下图表交换:
>```tikz
\usepackage{tikz-cd}
\begin{document}
\Large
\begin{tikzcd}[row sep=huge]
F(A) \arrow[r, "\eta_A"] \arrow[d, "F(f)"'] & G(A) \arrow[d, "G(f)"] \\
F(B) \arrow[r, "\eta_B"']                   & G(B)              
\end{tikzcd}
\end{document}
>```
>
>※$\eta$是一族态射, 以$\frak C$为指标, 元素为连接其在$\frak D$中的两个副本$F(A)$和$G(A)$.
>若自然变换$\eta:F\Rightarrow G$满足对任意的$A\in\ob{C}$, $\eta_A:F(A)\to G(A)$是一个[[同构]], 则称$\eta$是一个**自然同构**(natural isomorphism), 记作$F\cong G$.
>
>类似函子范畴的记法, $F$到$G$的全体自然变换可记作$[F,G]$.

>[!ex] 例1
>设$\wp:\sf{Set}\to\sf{Set}$是幂集函子, 对任意集合$A$, 定义$\beta_A:A\to\wp(A)$为$x\mapsto\set{x}$. 若$f:A\to P$, 我们总有$P(f)(\set{x})=\set{f(x)}$, 即下列图表交换:
>```tikz
\usepackage{tikz-cd}
\begin{document}
\LARGE
\begin{tikzcd}[row sep=huge] A & {\wp(A)} \\ B & {\wp(B)} \arrow["{\beta_A}", from=1-1, to=1-2] \arrow["f"', from=1-1, to=2-1] \arrow["{\wp(f)}", from=1-2, to=2-2] \arrow["{\beta_B}"', from=2-1, to=2-2] \end{tikzcd}
\end{document}
>```
>因此$\beta$是一个自然变换$1_{\sf Set}\Rightarrow\wp$.

事实上, 自然变换可以理解成函子的函子, 对于自然变换, 我们有以下结论:

>[!theorem] 定理1
>设$F,G,H:\frak C\to\frak D$和$T:\frak D\to\frak C$是函子, $\alpha:F\Rightarrow G$, $\beta:G\Rightarrow H$是自然变换, 则:
>1. $\beta\alpha:F\to H:A\mapsto(F(A)\xrightarrow{\beta_A\alpha_A}H(A))$是一个自然变换.
>2. $\alpha T:FT\to GT:B\mapsto(FT(B)\xrightarrow{\alpha_{T(B)}}GT(B))$是一个自然变换.
>3. $T\alpha:TF\to TG:A\mapsto(TF(A)\xrightarrow{T(\alpha_A)}TG(A))$是一个自然变换.

>[!proof]
>I. 对于$\frak C$中任意态射$f:A\to B$, 由于$\alpha,\beta$都是自然变换, 下列图表中左边的正方形和右边的正方形都交换, 因此整个交换图也交换.
>```tikz
\usepackage{tikz-cd}
\usepackage{amsfonts}
\begin{document}
\Large
\begin{tikzcd}[row sep=huge] {F(A)} & {G(A)} & {H(A)} \\ {F(B)} & {G(B)} & {H(B)} \arrow["{\alpha_A}", from=1-1, to=1-2] \arrow["{F(f)}"', from=1-1, to=2-1] \arrow["{\beta_A}", from=1-2, to=1-3] \arrow["{G(f)}"{description}, from=1-2, to=2-2] \arrow["{H(f)}", from=1-3, to=2-3] \arrow["{\alpha_B}"', from=2-1, to=2-2] \arrow["{\alpha_B}"', from=2-2, to=2-3] \end{tikzcd}
\end{document}
>```
>
>II. 即证明下列图表交换
>```tikz
\usepackage{tikz-cd}
\usepackage{amsfonts}
\begin{document}
\Large
\begin{tikzcd}[row sep=huge] {FT(A)} & {GT(A)} \\ {FT(B)} & {GT(B)} \arrow["{\alpha_{T(A)}}", from=1-1, to=1-2] \arrow["{FT(f)}"', from=1-1, to=2-1] \arrow["{GT(f)}", from=1-2, to=2-2] \arrow["{\alpha_{T(B)}}"', from=2-1, to=2-2] \end{tikzcd}
\end{document}
>```
>即, $GT(f)\circ\alpha_{T(A)}=\alpha_{T(B)}\circ FT(f)$. $FT,GT$都是$\frak C\to C$的函子, 由于$GT$是函子, 于是
>$$GT(f)\circ\alpha_{T(A)}=G(T(f)\circ\alpha_{T(A)})=G(\alpha_{T(B)}\circ T(f))=\alpha_{T(B)}\circ FT(f)$$
>这是由函子和自然变换的性质定义的. 类似地可以证明III.

