#分析 

>[!theorem] Fréchet导数的链式法则
>设$X,Y,Z$是[[赋范空间]], $U\subset X,V\subset Y$是开集, 对于[[映射]]$f:U\to Y$和映射$g:V\to Z$, 若$f$在点$x_0\in U$处[[Fréchet微分|Fréchet可微]], $g$在$y_0=f(x_0)\in V$处Fréchet可微, 则复合映射$g\circ f:U\to Z$在点$x_0$处Fréchet可微, 并且满足
>$$\D(g\circ f)(x_0)=\D g(y_0)\circ \D f(x_0)$$
>其中等式右边是[[算子|线性算子]]的复合.

>[!proof]
>展开F-微分有:
>$$\begin{aligned}
f(x_0+h)-f(x_0)=\D f(x_0)h+r_f(h)\quad\lim_{||h||_X\to 0}{\frac{||r_f(h)||_Y}{||h||_X}}=0\\
g(y_0+k)-g(y_0)=\D g(y_0)k+r_g(k)\quad\lim_{||k||_Y\to 0}{\frac{||r_g(k)||_Z}{||h||_Y}}=0
\end{aligned}$$
>不妨记$A=\D f(x_0), B=\D g(y_0)$. 不妨令$k=f(x_0+h)-f(x_0)=Ah+r_f(h)$. 带入上式, 将$y_0$改写为$f(x_0)$并化简可得:
>$$g(f(x_0+h))-g(f(x_0))=(BA)h+Br_f(h)+r_g(k)\tag{I}$$
>下面我们证明
>$$\lim_{||h||_X\to 0}{\frac{||Br_f(h)+r_g(k)||_Z}{||h||_X}}=0\tag{*}$$
>由F-导数定义, $B$是有界算子, 因此
>$$0\le\frac{||Br_f(h)||_Z}{||h||_X}\le||B||_{\rm{op}}\cdot\frac{||r_f(h)||_Y}{||h||_X}$$
>上式右边是一个常值乘以一个无穷小, 因此$\rm RHS\to 0$. 由夹逼定理知
>$$\lim_{||h||_X\to0}{\frac{||Br_f(h)||_Z}{||h||_X}}=0\tag{II}$$
>下面处理第二项, 注意到
>$$\frac{||r_g(k)||_Z}{||h||_X}=\frac{||r_g(k)||_Z}{||h||_Y}\cdot\frac{||h||_Y}{||h||_X}\tag{III}$$
>并且
>$$||k||_Y=||Ah+r_f(h)||_Y\le||A||_{\rm op}\cdot||h||_X+||r_f(h)||_Y$$
> 因此
>$$\frac{||k||_Y}{||h||_X}\le||A||_{\rm op}+\frac{||r_f(h)||_Y}{||h||_X}\to||A||_{\rm op}\quad(||h||_X\to 0)\tag{IV}$$
>这表明在$||h||_X$充分小时$||k||_Y\,/\,||h||_X$有界. 由于F-可微蕴含连续, 因此当$||h||_X\to 0$时, $||k||_Y\to 0$, 从而
>$$\lim_{||h||_X\to 0}{\frac{||r_g(k)||_Z}{||k||_Y}}=0\tag{V}$$
>结合(III), (IV)以及(V)可知
>$$\lim_{||h||_X\to 0}{\frac{||r_g(k)||_Z}{||h||_X}}=0\tag{VI}$$
>再结合(II)和(VI)就证明了(\*). 不妨令
>$$r(h)=Br_f(h)+r_g(k)$$
>显然有
>$$\lim_{||h||_X\to 0}{\frac{||r(h)||_Z}{||h||_X}}=0$$
>代入(I):
>$$g\circ f(x_0+h)-g\circ f(x_0)=(BA)h+r(h)$$
>这说明$g\circ f$在点$x_0$处F-可微, 且F-导算子为$BA=\D g(y_0)\circ \D f(x_0)$, 再由唯一性就证明了定理.

>[!corollary] 特殊情形1 ($\R\to\R$)
>设函数$f,g:\R\to\R$(或者定义域为$\R$的一个开集) 满足可复合的条件, 且$f$在点$x$可微, $g$在$f(x)$可微, 则
>$$\dd{x}{g(f(x))}=\dd{f(x)}{g(f(x))}\cdot\dd{x}{f(x)}$$
>若记$f(x)=u$, $g(u)=y$, 则有如下简化形式
>$$\dd{x}{y}=\dd{u}{y}\cdot\dd{x}{u}$$

注意, 此处的映射复合就是实数乘法, 因此是可以交换的, 但一般情况下不可以交换.

>[!corollary] 特殊情形2 ($\R^a\to\R^b\to\R^c$)
>设函数$\vec f:\R^a\supset U\to\R^b$, $\vec g:\R^b\supset V\to\R^c$满足可复合的条件, 且$\vec f$在$\vec x$可微, $\vec g$在$\vec f(\vec x)$可微, 则
>$$\mb J_{\vec f\circ \vec g}(\vec x)=\mb J_{\vec g}(\vec f(\vec x))\mb J_{\vec f}(\vec x)$$
